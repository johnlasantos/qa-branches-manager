import{j as e,Z as j,J as i,p as N}from"./vendor-D1edepek.js";import{c as g}from"./App-jtuI45iU.js";import{B as y}from"./button-IneqVM9s.js";import"./index-gRCzXA7N.js";const $=({output:u,className:m})=>{const h=()=>{navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(u).then(()=>{i.success("Output copied to clipboard")}).catch(()=>{d()}):d()},d=()=>{try{if(document.getElementById("git-output")){const s=document.createElement("textarea");s.value=u,s.style.position="fixed",s.style.left="-999999px",s.style.top="-999999px",document.body.appendChild(s),s.focus(),s.select();try{if(document.execCommand("copy"))i.success("Output copied to clipboard");else throw new Error("execCommand failed")}catch{i.info("Press Ctrl+C to copy the command",{duration:5e3})}document.body.removeChild(s)}}catch{i.info("Press Ctrl+C to copy the command",{duration:5e3})}},p=a=>a?a.split(`
`).map((s,t)=>s.includes("|")&&/\s[+-]+$/.test(s)?f(s,t):s.includes("insertions(+)")||s.includes("deletions(-)")||s.includes("files changed")?x(s,t):s.includes("new file mode")?e.jsx("span",{className:"block",children:e.jsx("span",{className:"text-[#7ce77c]",children:s})},t):s.includes("delete mode")?e.jsx("span",{className:"block",children:e.jsx("span",{className:"text-[#ea384c]",children:s})},t):s.includes("binary file")&&s.includes("changed")?e.jsx("span",{className:"block",children:s.split("changed").map((c,r)=>e.jsxs(N.Fragment,{children:[c,r===0&&e.jsx("span",{className:"text-[#FEF7CD]",children:"changed"})]},`bin-${r}`))},t):s.startsWith("+")||s.includes("+++++")?e.jsx("span",{className:"text-[#7ce77c] block",children:s},t):s.includes("Already up to date")?e.jsx("span",{className:"text-[#7ce77c] block font-medium",children:s},t):s.includes("Switched to branch")?e.jsx("span",{className:"text-[#7ce77c] block font-medium",children:s},t):s.includes("Your branch is up to date with")?e.jsx("span",{className:"text-[#7ce77c] block font-medium",children:s},t):s.includes("Updating ")?e.jsx("span",{className:"text-[#7ce77c] block font-medium",children:s},t):s.startsWith("-")||s.includes("-----")?e.jsx("span",{className:"text-[#ea384c] block",children:s},t):s.includes("D	")?e.jsx("span",{className:"text-[#ea384c] block font-medium",children:s},t):s.includes("Deleted branch")?e.jsx("span",{className:"text-[#ea384c] block font-medium",children:s},t):s.includes("Your branch is behind")?e.jsx("span",{className:"text-[#ea384c] block font-medium",children:s},t):s.includes("deprecated branches removed")?e.jsx("span",{className:"text-[#ea384c] block font-medium",children:s},t):s.includes("error:")||s.includes("fatal:")?e.jsx("span",{className:"text-[#ea384c] block font-medium",children:s},t):s.includes("would be overwritten by merge")?e.jsx("span",{className:"text-[#ea384c] block font-medium",children:s},t):s.includes("M	")?e.jsx("span",{className:"text-[#FEF7CD] block font-medium",children:s},t):s.includes('use "git pull"')?e.jsx("span",{className:"text-[#1e1e1e] block font-medium",children:s},t):e.jsx("span",{className:"block",children:s},t)):e.jsx("span",{className:"text-gray-500 italic",children:"No output to display"}),f=(a,s)=>{const t=a.split("|");if(t.length<2)return e.jsx("span",{className:"block",children:a},s);const c=t[0];let r=t[1];const l=r.search(/[+-]/);if(l===-1)return e.jsx("span",{className:"block",children:a},s);const o=r.substring(0,l),n=r.substring(l);return e.jsxs("span",{className:"block",children:[c,"|",o,b(n)]},s)},x=(a,s)=>{let t=[],c=0;const r=a.match(/(\d+)\s+files?\s+changed/);if(r){const n=a.indexOf(r[0]);t.push(e.jsx("span",{children:a.substring(c,n)},`${s}-changed-before`),e.jsx("span",{className:"text-[#FEF7CD]",children:r[0]},`${s}-changed`)),c=n+r[0].length}const l=a.match(/(\d+)\s+insertions?\(\+\)/);if(l){const n=a.indexOf(l[0],c);t.push(e.jsx("span",{children:a.substring(c,n)},`${s}-insert-before`),e.jsx("span",{className:"text-[#7ce77c]",children:l[0]},`${s}-insert`)),c=n+l[0].length}const o=a.match(/(\d+)\s+deletions?\(-\)/);if(o){const n=a.indexOf(o[0],c);t.push(e.jsx("span",{children:a.substring(c,n)},`${s}-delete-before`),e.jsx("span",{className:"text-[#ea384c]",children:o[0]},`${s}-delete`)),c=n+o[0].length}return c<a.length&&t.push(e.jsx("span",{children:a.substring(c)},`${s}-remaining`)),t.length===0?e.jsx("span",{className:"block",children:a},s):e.jsx("span",{className:"block",children:t})},b=a=>{let s=[],t=null,c="";for(let r=0;r<a.length;r++){const l=a[r];l==="+"?t!=="plus"?(c&&s.push(e.jsx("span",{className:t==="minus"?"text-[#ea384c]":"",children:c},`sym-${r}`)),t="plus",c=l):c+=l:l==="-"?t!=="minus"?(c&&s.push(e.jsx("span",{className:t==="plus"?"text-[#7ce77c]":"",children:c},`sym-${r}`)),t="minus",c=l):c+=l:(c&&s.push(e.jsx("span",{className:t==="plus"?"text-[#7ce77c]":t==="minus"?"text-[#ea384c]":"",children:c},`sym-${r}`)),t=null,c=l)}return c&&s.push(e.jsx("span",{className:t==="plus"?"text-[#7ce77c]":t==="minus"?"text-[#ea384c]":"",children:c},"sym-last")),s};return e.jsxs("div",{className:g("w-full flex flex-col",m),children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Command Output"}),e.jsx(y,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:h,disabled:!u,title:"Copy to clipboard",children:e.jsx(j,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"rounded-md h-80 min-h-80 max-h-80 overflow-auto",children:e.jsx("pre",{id:"git-output",className:"git-output text-sm p-4 whitespace-pre-wrap",children:p(u)})})]})};export{$ as default};
