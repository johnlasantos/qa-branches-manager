import{r as t,j as e,x as E,L as k}from"./vendor-D1edepek.js";import{I as F,S as H,B as M}from"./BranchIcon-BWE1_hKG.js";import{c as v,T as O,a as Q,b as z,d as P}from"./App-jtuI45iU.js";import{A as q,b as G,c as J,d as K,e as U,f as V,g as W,h as X}from"./alert-dialog-Co8LTfw-.js";import"./index-gRCzXA7N.js";import"./button-IneqVM9s.js";const Y=n=>n.includes("HEAD ->")||n.includes("origin/HEAD"),re=({remoteBranches:n,localBranches:w,onSearch:C,onSelectRemoteBranch:S,onScrollEnd:u,className:D})=>{const[p,x]=t.useState(""),[o,a]=t.useState(!1),[l,h]=t.useState(null),N=t.useRef(null),d=t.useRef(null),[A,m]=t.useState(!1),c=t.useRef(null),g=t.useRef(null),[j,b]=t.useState(!1),I=new Set(w.map(s=>s.name)),i=n.filter(s=>{const r=!I.has(s.name),f=!Y(s.name),B=s.name.toLowerCase().includes(p.toLowerCase());return r&&f&&B});t.useEffect(()=>{if(!u)return;c.current=new IntersectionObserver(r=>{const[f]=r;f.isIntersecting&&o&&(b(!0),u())},{threshold:.1});const s=g.current;return s&&c.current.observe(s),()=>{s&&c.current&&c.current.unobserve(s)}},[u,o]),t.useEffect(()=>{if(j){const s=setTimeout(()=>{b(!1)},300);return()=>clearTimeout(s)}},[n.length]);const R=()=>{a(!0)},y=()=>{a(!o)},L=s=>{const r=s.target.value;x(r),C(r),h(null),a(!0)},T=s=>{h(s),m(!0)};return t.useEffect(()=>{const s=r=>{d.current&&!d.current.contains(r.target)&&a(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),e.jsxs("div",{className:v("relative w-full",D),ref:d,children:[e.jsxs("div",{className:"relative",children:[e.jsx(F,{ref:N,type:"text",placeholder:"Search remote branches",value:p,onChange:L,onFocus:R,className:"pr-9 focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-input w-full",autoComplete:"off"}),e.jsx(E,{className:"absolute right-2.5 top-2.5 h-4 w-4 text-gray-500 cursor-pointer",onClick:y})]}),e.jsx(q,{open:A,onOpenChange:s=>{m(s)},children:e.jsxs(G,{children:[e.jsxs(J,{children:[e.jsxs(K,{children:["Create and change a local branch from ",e.jsx("span",{className:"font-mono",children:l}),"?"]}),e.jsx(U,{children:"This will create a new local branch from the selected remote branch."})]}),e.jsxs(V,{children:[e.jsx(W,{children:"Cancel"}),e.jsx(X,{onClick:()=>{m(!1),l&&(S(l,{imported:!0}),x(""),h(null),a(!1))},children:"Import branch"})]})]})}),o&&i.length>0&&e.jsxs("div",{className:"search-results mt-1 absolute left-0 bg-white border border-gray-200 rounded shadow-lg z-50 w-full",children:[e.jsxs("div",{className:"py-1 text-xs text-gray-500 px-3 border-b flex items-center",children:[e.jsx("span",{children:"Remote branches"}),i.length>0&&e.jsxs("span",{className:"ml-1",children:["(",i.length,")"]}),j&&e.jsx(k,{className:"h-3 w-3 text-blue-500 animate-spin ml-2"})]}),e.jsx(H,{className:"h-[calc(100vh-24rem)] max-h-56 overflow-auto",children:e.jsxs("ul",{className:"space-y-2 p-2",children:[i.map(s=>e.jsx(O,{children:e.jsxs(Q,{children:[e.jsx(z,{asChild:!0,children:e.jsx("li",{className:v("px-3 py-2 hover:bg-blue-50 flex items-center group cursor-pointer rounded",l===s.name?"bg-blue-100 border border-blue-300":""),onMouseDown:r=>r.preventDefault(),onClick:()=>T(s.name),tabIndex:0,"aria-selected":l===s.name,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{branchName:s.name,hasRemote:!0,className:"mr-2"}),e.jsx("span",{children:s.name})]})})}),e.jsx(P,{children:e.jsx("p",{children:"Import this remote branch"})})]})},s.name)),e.jsx("li",{ref:g,className:"h-4"})]})})]})]})};export{re as default};
